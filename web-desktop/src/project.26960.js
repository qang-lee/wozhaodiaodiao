require=function a(o,c,m){function u(t,e){if(!c[t]){if(!o[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=c[t]={exports:{}};o[t][0].call(i.exports,function(e){return u(o[t][1][e]||e)},i,i.exports,a,o,c,m)}return c[t].exports}for(var h="function"==typeof require&&require,e=0;e<m.length;e++)u(m[e]);return u}({endLayer:[function(e,t,s){"use strict";cc._RF.push(t,"f9eb0dXP7VEgZg0qKdlZR2V","endLayer"),cc.Class({extends:cc.Component,properties:{m_Show:cc.Label},ctor:function(){this._showValue=0},onload:function(){},start:function(){},setData:function(e){this._showValue=e.score,this.m_Show.string=this._showValue}}),cc._RF.pop()},{}],gameEngine:[function(e,t,s){"use strict";cc._RF.push(t,"f029dAeLf1LtLFZ6TlcFXK9","gameEngine");var n=e("rightStatus"),i=e("wrongStatus"),a=e("startStatus"),o=e("homeStatus"),c=e("pauseStatus");cc.Class({extends:cc.Component,properties:{m_GameView:cc.Node,m_LanuchView:cc.Node,m_RankView:cc.Node,textureURL:{default:"",url:cc.Texture2D},m_Home:cc.Node},ctor:function(){this.initData(),this._statusArr=new Array},initData:function(){this.m_bPause=!1,this.m_bRight=null,this.m_CurStatus=null,this.m_wTime=0,this.m_wGameScore=0,this.m_wQuestionNum=0},onLoad:function(){cc.sys.isNative&&(window.io=SocketIO),this.m_GameView=this.m_GameView.getComponent("gameView"),this.m_LanuchView=this.m_LanuchView.getComponent("lanuchView"),this.m_RankView=this.m_RankView.getComponent("rankView"),this.m_GameView.setGameEngine(this),this.m_LanuchView.setGameEngine(this),this.m_RankView.setGameEngine(this),this.m_StartStatus=new a,this.m_RightStatus=new n,this.m_WrongStatus=new i,this.m_HomeStatus=new o,this.m_PauseStatus=new c,this._statusArr[STATUS.START]=this.m_StartStatus,this._statusArr[STATUS.RIGHT]=this.m_RightStatus,this._statusArr[STATUS.WRONG]=this.m_WrongStatus,this._statusArr[STATUS.HOME]=this.m_HomeStatus,this._statusArr[STATUS.PAUSE]=this.m_PauseStatus,this.m_CurStatus=this._statusArr[STATUS.HOME],this._statusArr.forEach(function(e){e.setGameEngine(this)},this),this.setLanchuViewShow(!0),this.setGameViewShow(!1)},showQuestion:function(){this.m_GameView.setQuestionNum("第"+ ++this.m_wQuestionNum+"题");var e=g_GameLogic.GetRandomNum(2);this.num1=g_GameLogic.GetRandomNum(8)+1,this.num2=g_GameLogic.GetRandomNum(8)+1,0==e&&this.num1<=this.num2&&(console.log("递归前"),console.log("this.num1 "+this.num1),console.log("this.num2 "+this.num2),this.random(),console.log("递归后"),console.log("this.num1 "+this.num1),console.log("this.num2 "+this.num2));var t=g_GameLogic.GetRandomNum(2),s=e?this.num1+this.num2:this.num1-this.num2,n=t?s:g_GameLogic.GetRandomNum(8)+1,i=[e,this.num1,this.num2,n];this.m_GameView.showQuestion(i),this.m_bRight=s==n},random:function(){this.num1=g_GameLogic.GetRandomNum(8)+1,this.num2=g_GameLogic.GetRandomNum(8)+1,console.log("递归中"),console.log("this.num1 "+this.num1),console.log("this.num2 "+this.num2),this.num1<=this.num2&&this.random()},startClock:function(){this.unscheduleAllCallbacks(),this.m_wTime=TIME;this.m_GameView.setClockTime(this.m_wTime),this.schedule(function(){this.m_bPause||(this.m_wTime-=.01,this.m_GameView.setClockTime(this.m_wTime),this.m_wTime<0&&(this.unscheduleAllCallbacks(),this.setGameStatus(STATUS.WRONG)))},.01)},right:function(){TIME*=1-VARY,this.m_GameView.setGameScore(++this.m_wGameScore),this.setGameStatus(STATUS.RIGHT)},wrong:function(e){this.m_HeartSum?this.setGameStatus(STATUS.PAUSE):this.setGameStatus(STATUS.WRONG)},resume:function(){this.setGameStatus(STATUS.RIGHT)},resumeEx:function(){this.m_bPause=!1,this.m_GameView.setPauseLayerShow(!1)},share:function(){var t=this;wx.shareAppMessage({title:"经典小游戏始终好玩如初，来吧！一起来回味吧！",query:"type=heart",imageUrl:"http://47.95.230.50:88/shareImg.png",success:function(e){console.log("转发成功!!!"),this.reward()},fail:function(e){console.log("转发失败!!!"),t.m_GameView.setPauseLayerShow(!0,3)}})},shareEx:function(){var t=this;wx.shareAppMessage({title:"经典小游戏始终好玩如初，来吧！一起来回味吧！",imageUrl:"http://47.95.230.50:88/shareImg.png",query:"type=heart&url="+gloablUserIfo.url+"&name="+gloablUserIfo.name,success:function(e){e.shareTickets&&e.shareTickets[0]?(t.reward(),console.log("转发成功!!!"),t.m_GameView.setPauseLayerShow(!0,2)):t.m_GameView.setPauseLayerShow(!0,3)},fail:function(e){console.log("转发失败!!!"),t.m_GameView.setPauseLayerShow(!0,3)}})},home:function(){this.setGameStatus(STATUS.HOME)},music:function(){},restart:function(){this.setGameStatus(STATUS.START)},reward:function(){this.m_HeartSum=2,this.m_GameView.setHart(this.m_HeartSum)},rewardEx:function(){console.log("reward ok")},process:function(){this.m_CurStatus.enterStatus()},gameEnd:function(){this.m_bPause=!0,this.m_GameView.setEndLayerShow(!0),this.m_GameView.setEndLayerData({score:this.m_wGameScore}),this.setRankViewShow(!0),this.m_RankView.setShowStatus(RANK.END)},gamePause:function(){this.m_bPause=!0,this.m_GameView.setPauseLayerShow(!0,1),this.m_GameView.setPauseLayerData({score:this.m_wGameScore,heart:this.m_HeartSum})},gameStart:function(){this.m_GameView.setStartShow(),this.countDown()},countDown:function(){var t=this,s=1,e=this.m_GameView["m_CountDown"+s];t.countAnimate(e),this.schedule(function(){if(5!=++s){var e=this.m_GameView["m_CountDown"+s];t.countAnimate(e)}else t.m_GameView.startAnimate()},.6,3)},setGameStatus:function(e){console.log("状态:"+STATUS_NAME[e]),this.m_CurStatus&&this.m_CurStatus.exitStatus(),this.m_CurStatus=this._statusArr[e],this.process()},setLanchuViewShow:function(e){this.m_LanuchView.node.active=e},setGameViewShow:function(e){this.m_GameView.node.active=e},setRankViewShow:function(e){this.setHomeShow(e),0==(this.m_RankView.node.active=e)&&this.m_RankView.hideAll()},setHomeShow:function(e){this.m_Home.active=e},initGame:function(){TIME=5,this.initData(),this.unscheduleAllCallbacks(),this.m_GameView.setClockTime(100);this.m_GameView.showQuestion([0,0,0,0]),this.setRankViewShow(!1),this.m_GameView.setQuestionNum(0),this.m_GameView.setGameScore(0)},InitEnd:function(){this.m_GameView.setEndLayerShow(!1),this.m_GameView.setEndLayerData({score:0}),this.setRankViewShow(!1)},InitPause:function(){this.m_bPause=!1,this.m_GameView.setHart(--this.m_HeartSum),this.m_GameView.setPauseLayerShow(!1),this.m_GameView.setPauseLayerData({score:0,heart:0})},countAnimate:function(e){var t=cc.spawn(cc.fadeIn(.6),cc.scaleTo(.6,.3)),s=cc.sequence(t,cc.fadeOut(.3),cc.callFunc(function(){e.setScale(1)},e));e.runAction(s)}}),cc._RF.pop()},{homeStatus:"homeStatus",pauseStatus:"pauseStatus",rightStatus:"rightStatus",startStatus:"startStatus",wrongStatus:"wrongStatus"}],gameView:[function(e,t,s){"use strict";cc._RF.push(t,"4bcf7Ii0IVH7qBloK1m0N2U","gameView");cc.Class({extends:cc.Component,properties:{m_Num1:cc.Node,m_Num2:cc.Node,m_Answer:cc.Node,m_Operator:cc.Node,m_Time:cc.Label,m_EndView:cc.Node,m_QuestionView:cc.Node,m_PauseView:cc.Node,m_QuestionNum:cc.Label,m_GameScore:cc.Label,m_Heart:cc.Label,m_ProGressBar:cc.ProgressBar,m_CountDown1:cc.Node,m_CountDown2:cc.Node,m_CountDown3:cc.Node,m_CountDown4:cc.Node,m_BtnWrong:cc.Node,m_BtnRight:cc.Node},onLoad:function(){this.m_EndView=this.m_EndView.getComponent("endLayer"),this.m_PauseView=this.m_PauseView.getComponent("pauseLayer")},setGameEngine:function(e){this.m_gameEngine=e},onClick_right:function(){this.m_gameEngine.m_bRight?this.m_gameEngine.right():this.m_gameEngine.wrong()},onClick_wrong:function(){this.m_gameEngine.m_bRight?this.m_gameEngine.wrong():this.m_gameEngine.right()},onClick_home:function(){this.m_gameEngine.home()},onClick_music:function(){this.m_gameEngine.music()},onClick_restart:function(){this.m_gameEngine.restart()},onClick_Rank:function(){this.m_gameEngine.m_RankView.setShowStatus(RANK.FRIEND)},onClick_challenge:function(){this.m_gameEngine.share()},onClick_share:function(){this.m_gameEngine.share()},onClick_shareHeart:function(){this.m_gameEngine.shareEx()},onClick_resume:function(){this.m_gameEngine.resume()},onClick_resumeEx:function(){this.m_gameEngine.resumeEx()},setEndLayerShow:function(e){this.m_EndView.node.active=e},setPauseLayerShow:function(e,t){this.m_PauseView.node.active=e,this.m_PauseView.setShowType(t)},setPauseLayerData:function(e){this.m_PauseView.setData(e)},setEndLayerData:function(e){this.m_EndView.setData(e)},setClockTime:function(e){this.m_ProGressBar.progress=e/TIME},setQuestionNum:function(e){this.m_QuestionNum.string=e},setGameScore:function(e){this.m_GameScore.string=e},showQuestion:function(e){this.m_Num1=this.m_Num1.getComponent("showNode"),this.m_Num2=this.m_Num2.getComponent("showNode"),this.m_Answer=this.m_Answer.getComponent("showNode"),this.m_Operator=this.m_Operator.getComponent("showNode"),this.m_Operator.setShow(e[0]?"+":"-"),this.m_Num1.setShow(e[1]),this.m_Num2.setShow(e[2]),this.m_Answer.setShow(e[3])},setHart:function(e){this.m_Heart.string="x"+e},startAnimate:function(){this.m_QuestionView.runAction(cc.fadeIn(.5)),this.m_BtnRight.runAction(cc.moveBy(.5,cc.p(0,550))),this.m_BtnWrong.runAction(cc.moveBy(.5,cc.p(0,550))),this.m_ProGressBar.node.runAction(cc.moveBy(.5,cc.p(0,-550))),this.m_BtnRight.active=!0,this.m_BtnRight.active=!0},setStartShow:function(){this.m_QuestionView.opacity=0,this.m_BtnRight.setPositionY(this.m_BtnRight.getPositionY()-550),this.m_BtnWrong.setPositionY(this.m_BtnWrong.getPositionY()-550),this.m_ProGressBar.node.setPositionY(this.m_ProGressBar.node.getPositionY()+550)}}),cc._RF.pop()},{}],homeStatus:[function(e,t,s){"use strict";cc._RF.push(t,"110aakO9JhPKJIaiI79IOKD","homeStatus");var n=e("statusModel");cc.Class({extends:n,enterStatus:function(){this.m_gameEngine.setLanchuViewShow(!0),this.m_gameEngine.setGameViewShow(!1),this.m_gameEngine.initGame()}}),cc._RF.pop()},{statusModel:"statusModel"}],lanuchView:[function(e,t,s){"use strict";cc._RF.push(t,"777f7o/cehFVprJQSQqxBSf","lanuchView"),window.g_UserInfo=0,cc.Class({extends:cc.Component,properties:{m_RewardLayer:cc.Node},getUserData:function(e,t){wx.getUserInfo({success:function(e){var t=e.userInfo,s=(g_UserInfo=t).nickName,n=t.avatarUrl;t.gender,t.province,t.city,t.country;gloablUserIfo.url=n,gloablUserIfo.name=s,console.log("avatarUrl"+n),console.log("nickName"+s),wx.login({success:function(e){console.log("loginCode.code"+e.code),wx.request({url:"https://wxxyx.2828.net/gameApi.php",data:{type:"login",appid:"wx00673a34ccefc48d",code:e.code,userinfo:JSON.stringify(g_UserInfo)},success:function(e){console.log(e),gloablUserIfo.openid=e.data.data.openid,console.log("获取openid"+gloablUserIfo.openid)},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"}})}})}})},onLoad:function(){if(!DEBUG){this.getUserData();var s=this,t=wx.getLaunchOptionsSync();console.log("LaunchOption"),console.log(t),1044==t.scene&&"heart"==t.query.type&&(s.setRewardLayerShow(!0),s.m_gameEngine.reward(),cc.sys.localStorage.setItem("bReward",1),console.log("用户信息"),console.log(t.query.url),console.log(t.query.name),s.m_RewardLayer.getComponent("rewardLayer").setHead({url:t.query.url,name:t.query.name})),wx.onShow(function(e){console.log("onShow"),console.log(e),1044==e.scene&&"heart"==e.query.type&&(s.setRewardLayerShow(!0),s.m_gameEngine.reward(),cc.sys.localStorage.setItem("bReward",1),console.log("用户信息"),console.log(t.query.url),console.log(t.query.name),s.m_RewardLayer.getComponent("rewardLayer").setHead({url:t.query.url,name:t.query.name}))}),wx.updateShareMenu({withShareTicket:!0,success:function(e){console.log("withShareTicket true")}}),wx.showShareMenu&&(wx.showShareMenu({withShareTicket:!0,success:function(e){console.log("showShareMenu true")},fail:function(e){console.log(e)}}),wx.onShareAppMessage(function(e){var t=!1;return s.m_gameEngine.m_CurStatus!=s.m_gameEngine.m_HomeStatus&&(t=!0),t&&(console.log("点击转发的时候就设置了"),s.m_gameEngine.m_bPause=!0,s.m_gameEngine.m_GameView.setPauseLayerShow(!0,3)),{title:"不怕，就来PK！",imageUrl:"http://47.95.230.50:88/shareImg.png",query:"type=heart&url="+gloablUserIfo.url+"&name="+gloablUserIfo.name,success:function(e){e.shareTickets&&e.shareTickets[0]?(console.log("转发成功!!!"),t&&(s.m_gameEngine.m_bPause=!0,s.m_gameEngine.reward(),s.m_gameEngine.m_GameView.setPauseLayerShow(!0,2))):t&&(s.m_gameEngine.m_bPause=!0,s.m_gameEngine.m_GameView.setPauseLayerShow(!0,3))},fail:function(e){console.log("转发失败!!!"),t&&(s.m_gameEngine.m_bPause=!0,s.m_gameEngine.m_GameView.setPauseLayerShow(!0,3))}}}))}},share:function(){wx.shareAppMessage({title:"不怕，就来PK！",imageUrl:"http://47.95.230.50:88/shareImg.png",query:"type=heart&url="+gloablUserIfo.url+"&name="+gloablUserIfo.name,success:function(e){e.shareTickets&&e.shareTickets[0]?(console.log("转发成功!!!"),bHome&&(self.m_gameEngine.reward(),self.m_gameEngine.m_GameView.setPauseLayerShow(!0,2))):bHome&&self.m_gameEngine.m_GameView.setPauseLayerShow(!0,3)},fail:function(e){console.log("转发失败!!!"),bHome&&self.m_gameEngine.m_GameView.setPauseLayerShow(!0,3)}})},setRewardLayerShow:function(e){(this.m_RewardLayer.active=e)?console.log("this.m_StartBtn.hide"):console.log("this.m_StartBtn.show")},start:function(){this._isShow=!1,this.tex=new cc.Texture2D},setGameEngine:function(e){this.m_gameEngine=e},onClick_start:function(){this.m_gameEngine.setGameStatus(STATUS.START)},onClick_qun_rank:function(){this.m_gameEngine.m_RankView.setShowStatus(RANK.QUN)},onClick_Rank:function(){this.m_gameEngine.m_RankView.setShowStatus(RANK.FRIEND)},onClick_image:function(){wx.previewImage({urls:["http://47.95.230.50:88/otherGame1.png"],success:function(){console.log("ok")},fail:function(){console.log("fail")},complete:function(){console.info("点击图片了")}})},onClick_Hide:function(){this.setRewardLayerShow(!1)}}),cc._RF.pop()},{}],pauseLayer:[function(e,t,s){"use strict";cc._RF.push(t,"ee581L7JdFFtq+uKSuqyJ9S","pauseLayer"),cc.Class({extends:cc.Component,properties:{m_Score:cc.Label,m_HeartTime:cc.Label},start:function(){},setData:function(e){this.m_Score.string=e.score,this.m_HeartTime.string=e.heart},setShowType:function(e){1==e?(this.node.getChildByName("show1").active=!0,this.node.getChildByName("show2").active=!1,this.node.getChildByName("show3").active=!1):2==e?(this.node.getChildByName("show1").active=!1,this.node.getChildByName("show2").active=!0,this.node.getChildByName("show3").active=!1):3==e&&(this.node.getChildByName("show1").active=!1,this.node.getChildByName("show2").active=!1,this.node.getChildByName("show3").active=!0)}}),cc._RF.pop()},{}],pauseStatus:[function(e,t,s){"use strict";cc._RF.push(t,"b6021axFpNMQqByJ8B78UXY","pauseStatus");var n=e("statusModel");cc.Class({extends:n,enterStatus:function(){this.m_gameEngine.gamePause()},exitStatus:function(){this.m_gameEngine.InitPause()}}),cc._RF.pop()},{statusModel:"statusModel"}],rankView:[function(e,t,s){"use strict";cc._RF.push(t,"b3257y6efxOxqmaoASNKERY","rankView"),cc.Class({extends:cc.Component,properties:{m_Notouch:cc.Node},start:function(){this._isShow=!1,this.tex=new cc.Texture2D},setGameEngine:function(e){this.m_gameEngine=e},_updaetSubDomainCanvas:function(){this.tex&&(this.tex.initWithElement(sharedCanvas),this.tex.handleLoadedTexture(),this.node.getChildByName("showView").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.tex))},update:function(){DEBUG||this._updaetSubDomainCanvas()},reset:function(){DEBUG||wx.postMessage({message:"HIDE_ALL"})},setShowStatus:function(e){if(!DEBUG){if(DEBUG)return;wx.postMessage({message:"USER_INFO",userInfo:{openid:gloablUserIfo.openid,session_key:gloablUserIfo.session_key}}),e==RANK.QUN?this.showQunLayer():e==RANK.END?this.showEndLayer():e==RANK.FRIEND&&this.showRankLayer()}},showEndLayer:function(){var e=this.m_gameEngine.m_wGameScore;e||(e=0),this.m_Notouch.active=!1,this.node.getChildByName("hide").active=!1,DEBUG||wx.postMessage&&wx.postMessage({message:"SHOW_END",scoreData:{score:e}})},hideEndLayer:function(){DEBUG||wx.postMessage&&wx.postMessage({message:"HIDE_END"})},hideAll:function(){DEBUG||wx.postMessage&&wx.postMessage({message:"HIDE_ALL"})},showQunLayer:function(){this.m_Notouch.active=!0,this.node.getChildByName("hide").active=!0;if(!DEBUG){wx.updateShareMenu&&wx.updateShareMenu({withShareTicket:!0,success:function(e){console.log("withShareTicket true！！！！！！")}});var t=this;wx.shareAppMessage({title:"经典小游戏始终好玩如初，来吧！一起来回味吧！",imageUrl:"http://47.95.230.50:88/shareImg.png",success:function(e){console.log("转发成功!!!"),console.log(e),wx.postMessage({message:"SHOW_QUN",shareData:{shareTicket:e.shareTickets[0]}}),t.m_gameEngine.setRankViewShow(!0)},fail:function(e){console.log("转发失败!!!")}})}},showRankLayer:function(){this.m_Notouch.active=!0,this.node.getChildByName("hide").active=!0,DEBUG||(wx.postMessage({message:"SHOW_FRIEND"}),this.m_gameEngine.setRankViewShow(!0))},onClickClose:function(){this.m_gameEngine.m_LanuchView.node.active,this.m_gameEngine.m_CurStatus==this.m_gameEngine.m_WrongStatus?(this.hideAll(),this.showEndLayer()):this.m_gameEngine.setRankViewShow(!1)},onClick_next:function(){DEBUG||wx.postMessage({message:"NEXT"})},onClick_last:function(){DEBUG||wx.postMessage({message:"LAST"})}}),cc._RF.pop()},{}],rewardLayer:[function(e,t,s){"use strict";cc._RF.push(t,"b605dizUw1B2ZNldAdeL9R3","rewardLayer"),cc.Class({extends:cc.Component,properties:{m_HeadImg:cc.Sprite,m_UserName:cc.Label},start:function(){},setHead:function(e){var t=e.url+"?aaa=aa.jpg",s=this;cc.loader.load(t,function(e,t){s.m_HeadImg.spriteFrame=new cc.SpriteFrame(t)}),this.m_UserName.string=e.name}}),cc._RF.pop()},{}],rightStatus:[function(e,t,s){"use strict";cc._RF.push(t,"83be8x68NJGs7R3mLf6x51+","rightStatus");var n=e("statusModel");cc.Class({extends:n,enterStatus:function(){this.m_gameEngine.showQuestion(),this.m_gameEngine.startClock()}}),cc._RF.pop()},{statusModel:"statusModel"}],showNode:[function(e,t,s){"use strict";cc._RF.push(t,"da415a1YjJFvZb0a9oGHrxR","showNode"),cc.Class({extends:cc.Component,properties:{m_Show:cc.Label},ctor:function(){this._showValue=0},onload:function(){},start:function(){},setShow:function(e){this._showValue=e,this.m_Show.string=this._showValue}}),cc._RF.pop()},{}],startStatus:[function(e,t,s){"use strict";cc._RF.push(t,"dbad3zsnOVCyKRAQuSnaos+","startStatus");var n=e("statusModel");cc.Class({extends:n,enterStatus:function(){this.m_gameEngine.initGame(),this.m_gameEngine.setLanchuViewShow(!1),this.m_gameEngine.setGameViewShow(!0),this.m_gameEngine.showQuestion(),this.m_gameEngine.gameStart()}}),cc._RF.pop()},{statusModel:"statusModel"}],statusModel:[function(e,t,s){"use strict";cc._RF.push(t,"aa5dabZk3FK5IK7dmMLEVY6","statusModel"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},enterStatus:function(){},exitStatus:function(){},setGameEngine:function(e){this.m_gameEngine=e}}),cc._RF.pop()},{}],wrongStatus:[function(e,t,s){"use strict";cc._RF.push(t,"43a5dBj8plI57nKbdPE1yXR","wrongStatus");var n=e("statusModel");cc.Class({extends:n,enterStatus:function(){this.m_gameEngine.gameEnd()},exitStatus:function(){this.m_gameEngine.InitEnd()}}),cc._RF.pop()},{statusModel:"statusModel"}]},{},["gameEngine","endLayer","pauseLayer","rewardLayer","showNode","homeStatus","pauseStatus","rightStatus","startStatus","statusModel","wrongStatus","gameView","lanuchView","rankView"]);